&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>rmarkdown on Fellipe Gomes - Data Science Blog</title>
    <link>https://gomesfellipe.github.io/tags/rmarkdown/</link>
    <description>Últimos posts sobre Data Science, Machine Learning e R</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>pt-br</language>
    <managingEditor>gomes.fellipe1@gmail.com (Fellipe Carvalho Gomes)</managingEditor>
    <webMaster>gomes.fellipe1@gmail.com (Fellipe Carvalho Gomes)</webMaster>
    <lastBuildDate>Fri, 13 Sep 2019 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://gomesfellipe.github.io/tags/rmarkdown/" rel="self" type="application/rss+xml" />
    <item>
      <title>Como automatizar relatórios longos e repetitivos com RMarkdown</title>
      <link>https://gomesfellipe.github.io/post/2019-09-13-relatorios-automaticos-com-rmarkdown/relatorios-automaticos-com-rmarkdown/</link>
      <pubDate>Fri, 13 Sep 2019 00:00:00 +0000</pubDate>
      <author>gomes.fellipe1@gmail.com (Fellipe Carvalho Gomes)</author>
      <guid>https://gomesfellipe.github.io/post/2019-09-13-relatorios-automaticos-com-rmarkdown/relatorios-automaticos-com-rmarkdown/</guid>
      <description>Veja como fazer um relatório estatístico &#34;extenso e repetitivo&#34; sem utilizar copiar e colar nenhuma vez</description>
      <content:encoded>&lt;![CDATA[
        


<div id="problema-de-negócio" class="section level1">
<h1>Problema de negócio</h1>
<p>Uma tarefa comum no dia a dia de um estatístico (ou cientista de dados) é a elaboração de relatórios para passsar ao restante da equipe e/ou tomadores de decisão os resultados encontrados e muitas vezes essa tarefa pode parecer desgastante quando os relatórios são muitos extensos e repetitivos.</p>
<p>Com a linguagem R, escrever relatórios estatísticos utilizando <a href="https://rmarkdown.rstudio.com/">RMarkdown</a> acaba sendo a escolha padrão por ser tão simples transformar as análises em documentos, apresentações e dashboards de alta qualidade com poucas linhas de código.</p>
<p>Assim, combinando conceitos de programação, como o <a href="https://pt.wikipedia.org/wiki/Loop_(programa%C3%A7%C3%A3o)">Loop</a> no R e a linguagem <a href="https://pt.wikipedia.org/wiki/Markdown">Markdown</a> para produção de relatórios, temos uma poderosa ferramenta para <a href="https://pt.wikipedia.org/wiki/Automa%C3%A7%C3%A3o">Automação</a> de relatórios.</p>
<div id="entendendo-o-problema" class="section level2">
<h2>Entendendo o problema</h2>
<p>Suponha que o seguinte gráfico seja apresentado à você:</p>
<center>
<img src="/post/2019-09-13-relatorios-automaticos-com-rmarkdown/figure-html/unnamed-chunk-1-1.gif" style="width:80.0%" />
</center>
<p>Este gráfico animado apresenta a evolução da esperança de vida ao nascer (em anos) em relação ao PIB per capita (em US$, ajustado pela inflação) de 141 países dos 5 continentes durante o período de 1952 até 2007, a cada 5 anos.</p>
<p>Entraremos em mais detalhes sobre as informações dete gráfico a seguir.</p>
</div>
</div>
<div id="fonte-dos-dados" class="section level1">
<h1>Fonte dos dados</h1>
<p>Os dados utilizados neste problema foram importados através do pacote <a href="https://cran.r-project.org/web/packages/gapminder/index.html">gapminder</a> que é um projeto que utiliza dados do site <a href="https://www.gapminder.org/">Gapminder.org</a>.</p>
<p>Segundo sua <a href="https://www.gapminder.org/about-gapminder/">descrição no site</a>:</p>
<blockquote>
<p>“Gapminder é uma fundação independente sueca sem afiliações políticas, religiosas ou econômicas. (…)”</p>
</blockquote>
<p>No site é possível obter dados gratuitos para se obter estatísticas confiáveis e além dos disso a Fundação Gapminder apresenta alguns outros projetos como o <a href="https://www.gapminder.org/dollar-street/matrix">Dollar Street</a> que apresenta 30.000 fotos de 264 famílias em 50 países classificados por renda.</p>
<p>Na página do projeto é possível ver e comparar os mais variados aspectos da população ao redor do mundo que vão desde casas, itens mais amados, carros até banheiros, comida de pets e bebidas alcoólicas.</p>
<p>O pacote fornece dados da Fundação Gapminder como: valores de expectativa de vida, PIB per capta e população, a cada cinco anos, de 1952 a 2007 (total de 12 anos). Veja as primeiras 5 linhas da base de dados contidos no pacote:</p>
<pre class="r"><code># Base de dados utilizada
head(gapminder)</code></pre>
<pre><code>## # A tibble: 6 x 6
##   country     continent  year lifeExp      pop gdpPercap
##   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
## 1 Afghanistan Asia       1952    28.8  8425333      779.
## 2 Afghanistan Asia       1957    30.3  9240934      821.
## 3 Afghanistan Asia       1962    32.0 10267083      853.
## 4 Afghanistan Asia       1967    34.0 11537966      836.
## 5 Afghanistan Asia       1972    36.1 13079460      740.
## 6 Afghanistan Asia       1977    38.4 14880372      786.</code></pre>
<p>Essa base de dados possui 1705 linhas de 6 variáveis, onde:</p>
<ul>
<li><code>country</code>: factor com 142 levels</li>
<li><code>continent</code>: factor com 5 levels</li>
<li><code>year</code>: sequencia de 1952 até 2007 a cada 5 anos</li>
<li><code>lifeExp</code>: esperança de vida ao nascer, em anos</li>
<li><code>pop</code>: população</li>
<li><code>gdpPercap</code>: PIB per capita (em US$, ajustado pela inflação)</li>
</ul>
</div>
<div id="comportamento-geral-dos-dados" class="section level1">
<h1>Comportamento geral dos dados</h1>
<p>Antes de começar a fazer os relatórios para cada ano, vamos reproduzir a animação apresentada para nós com o comportamento temporal utilizando o pacote <a href="https://github.com/thomasp85/gganimate">gganimate</a>:</p>
<pre class="r"><code># Carregar pacotes
library(ggplot2)
library(dplyr)
library(gapminder)
library(scales)
library(gganimate)

# Definir tema:
theme_set(theme_bw())

# Funcao para customizar legendas:
custom_legend &lt;- function(x){comma(x, big.mark = &quot;.&quot;,decimal.mark = &quot;,&quot;)}

# Comportamento geral:
gapminder %&gt;% 
  filter(country!=&quot;Kuwait&quot;) %&gt;% # remover 1 pais outlier
  ggplot(aes(x = gdpPercap, y = lifeExp, size = pop, 
             label = country, color = continent, alpha= log(gdpPercap))) %+%
  geom_point(show.legend = F) %+%
  geom_text(show.legend = F, size = 3, nudge_y = -0.7) %+%
  scale_size_continuous(labels = custom_legend) %+%
  scale_x_continuous(labels = custom_legend) %+%
  geom_smooth(se=F, color = &quot;black&quot;, show.legend = F, method = &quot;lm&quot;) %+% 
  transition_time(year) %+%
  scale_color_brewer(palette = &quot;Dark2&quot;) %+%
  labs(title = &quot;Year: {frame_time}&quot;)</code></pre>
<center>
<img src="/post/2019-09-13-relatorios-automaticos-com-rmarkdown/unnamed-chunk-1-1.gif" style="width:80.0%" />
</center>
<p>Analisando esta animação é possível notar:</p>
<ul>
<li>Japão é o país que possui a maior expectativa de vida ao longo de todos os anos;</li>
<li>Os países do contínente africano são os que apresentam expectativa de vida mais baixa e pior <code>gdpPercap</code>.</li>
<li>A Arábia Saudita teve sua <code>gdpPercap</code> aumentada até 1978 porém a partir daí diminiu bastante.</li>
<li>O país com maior <code>gdpPercap</code> e expectativa de vida na América é o Estados Unidos;</li>
<li>A Noroega foi o país que mais se descatou com os valores mais elevados e estáveis ao longo destes 55 anos.</li>
</ul>
<p>Obs[1]: <a href="https://www.google.com/search?q=Kuwait&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwj53ZXJ4bPjAhVAD7kGHQvwCWgQ_AUIESgC&amp;biw=1574&amp;bih=943">Kuwait</a> foi removida para este gráfico animado pois é um país outlier. Segundo o <a href="https://pt.wikipedia.org/wiki/Kuwait">Wikipédia</a>:</p>
<blockquote>
<p>“O Kuwait tem um PIB (PPC) de US$ 167,9 bilhões[96] e uma renda per capita de US$ 81 800,[96] o que o torna o quinto país mais rico do mundo.[52] O índice de desenvolvimento humano (IDH) do Kuwait é de 0,816, um dos mais elevados do Oriente Médio e do mundo árabe. Com uma taxa de crescimento do PIB de 5,7%, o Kuwait tem uma das economias que mais crescem na região.[96]”</p>
</blockquote>
<p>Para quem tiver curiosidade, os dados de <code>Kuwait</code> podem ser obtidos da seguinte forma:</p>
<pre class="r"><code>gapminder %&gt;% filter(country == &quot;Kuwait&quot;)</code></pre>
<pre><code>## # A tibble: 12 x 6
##    country continent  year lifeExp     pop gdpPercap
##    &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;
##  1 Kuwait  Asia       1952    55.6  160000   108382.
##  2 Kuwait  Asia       1957    58.0  212846   113523.
##  3 Kuwait  Asia       1962    60.5  358266    95458.
##  4 Kuwait  Asia       1967    64.6  575003    80895.
##  5 Kuwait  Asia       1972    67.7  841934   109348.
##  6 Kuwait  Asia       1977    69.3 1140357    59265.
##  7 Kuwait  Asia       1982    71.3 1497494    31354.
##  8 Kuwait  Asia       1987    74.2 1891487    28118.
##  9 Kuwait  Asia       1992    75.2 1418095    34933.
## 10 Kuwait  Asia       1997    76.2 1765345    40301.
## 11 Kuwait  Asia       2002    76.9 2111561    35110.
## 12 Kuwait  Asia       2007    77.6 2505559    47307.</code></pre>
</div>
<div id="resolvendo-o-problema-de-negócio" class="section level1">
<h1>Resolvendo o problema de negócio</h1>
<p>Para resolver o problema de se fazer uma análise sobre a expectativa de vida, PIB per capta e população, para cada continente, para cada ano disponível, (ou seja, analisar de 1952 a 2007 a cada cinco anos) faremos um total de 12 relatórios.</p>
<p>Isso é muito para se arriscar usar <code>ctrl+c</code> e <code>ctrl+v</code> 12 vezes e depois caso precise de alguma mudança, alterar o relatório 12 vezes.</p>
<p>Portanto utilizaremos uma estratégia parecida com a que apresentei no último post sobre como <a href="https://gomesfellipe.github.io/post/2019-04-05-split-apply-combine/split-apply-combine/">Hackear o R com a estratécia Split-Appy-Combine</a>.</p>
<p>Primeiramente vamos separar nosso dataset por ano utilizando a função <code>tidyr::nest()</code>:</p>
<pre class="r"><code>library(tidyr) # funcao nest

# separar por ano:
nested_gapminder &lt;- gapminder %&gt;% nest(-year)</code></pre>
<p>Selecionei um dos anos como exemplo e utilizei os objetos <code>nested_gapminder$year[1]</code> e <code>nested_gapminder$data[[1]]</code> para desenvolver uma função que realizasse todas as análises que eu precisasse.</p>
<p>Essa função foi salva em um script separado chamado <code>analise.R</code> e pode ser encontrada <a href="">neste link</a>. Para caregar a função localmente basta utilizar a função <code>source()</code>, veja;</p>
<pre class="r"><code>source(&quot;analise_gapminder.R&quot;)</code></pre>
<p>Veja nas seções a seguir os outputs da função antes de encapsulá-la em um arquivo RMarkdown (.Rmd) para fazer o looping:</p>
<div id="resultados-para-o-ano-2007" class="section level2">
<h2>Resultados para o ano 2007</h2>
<p>A seguir vamos criar o objeto <code>x</code> que será o data set referente ao ano <code>title</code>. Em seguida vamos aplicar a função carregada anteriormente para obter os resultados das análises e salvar no objeto <code>resutls</code></p>
<pre class="r"><code>library(magrittr) # pipe %$%

# Obter resultados
x       &lt;- nested_gapminder %&gt;% filter(year == 2007) %&gt;% unnest()
title   &lt;- nested_gapminder %&gt;% filter(year == 2007) %$% year
results &lt;- analise_gapminder(x, title)</code></pre>
<p>Vejamos como o Brasil esta em relação aos outros países com um gráfico que resume os resultados do modelo ajustado:</p>
<pre class="r"><code>results$grafico_geral_regressao</code></pre>
<center>
<img src="/post/2019-09-13-relatorios-automaticos-com-rmarkdown/unnamed-chunk-9-1.png" style="width:80.0%" />
</center>
<p>Comportamento dos dados por Continente</p>
<pre class="r"><code>results$grafico_por_continente</code></pre>
<center>
<img src="/post/2019-09-13-relatorios-automaticos-com-rmarkdown/unnamed-chunk-10-1.png" style="width:80.0%" />
</center>
<p>Após ajustar o modelo de regressão, vamos obter algumas estatísticas descritivas com mais gráficos informativos!</p>
<p>O gráfico abaixo apresenta uma <a href="http://www.leg.ufpr.br/lib/exe/fetch.php/projetos:saudavel:loess.pdf">Regressão Local (LOESS)</a> com destaque nos países que tiveram <code>gdpPercap</code> e <code>lifeExp</code> acima da média</p>
<pre class="r"><code>results$grafico_zoom_acima_media</code></pre>
<center>
<img src="/post/2019-09-13-relatorios-automaticos-com-rmarkdown/unnamed-chunk-11-1.png" style="width:80.0%" />
</center>
<p>E agora podemos conferir um gráfico que apresenta uma <a href="http://www.leg.ufpr.br/lib/exe/fetch.php/projetos:saudavel:loess.pdf">Regressão Local (LOESS)</a> com destaque nos países que tiveram <code>gdpPercap</code> e <code>lifeExp</code> acima da média</p>
<pre class="r"><code>results$grafico_zoom_abaixo_media</code></pre>
<center>
<img src="/post/2019-09-13-relatorios-automaticos-com-rmarkdown/unnamed-chunk-12-1.png" style="width:80.0%" />
</center>
<p>Maravilha! Muitas informações interessantes mas não resolvemos o problema por inteiro. Resta aplicar as mesmas análises para os demais anos do nosso dataset.</p>
</div>
</div>
<div id="automatizar-as-analises-para-os-próximos-anos" class="section level1">
<h1>Automatizar as analises para os próximos anos</h1>
<p>A linha a seguir é a que realiza toda a mágica!</p>
<p>A função <code>knit_child()</code> compila o código R e retorna uma saída pura (Latex, html ou word sem código R), então se fizermos um looping da seguinte maneira teremos replicado nossas análises para todos os demais anos:</p>
<pre><code>rmarkdown::render(&quot;gapminder_automatico_master.Rmd&quot;)</code></pre>
<p>Veja o conteúdo do script <code>gapminder_automatico_master.Rmd</code>:</p>
<script src="https://gist.github.com/gomesfellipe/86af044b4e8a874756a2f4c379cfc01b.js"></script>
<p>Note que este script chama outro arquivo <code>.Rmd</code> chamado <code>gapminder_automatico_child.Rmd</code>, que tem o seguinte conteúdo:</p>
<script src="https://gist.github.com/gomesfellipe/2a9d666e041907ca88dd2188cbc72924.js"></script>
<p>Veja os resultados do looping:</p>
<iframe src="/post/2019-09-13-relatorios-automaticos-com-rmarkdown/gapminder_automatico_master.pdf" width="600" height="827" style="border: none;">
</iframe>
</div>
<div id="conclusão" class="section level1">
<h1>Conclusão</h1>
<p>A Abordagem para criar chunks <em>filhos</em> de RMarkdown com a função <code>knit_child()</code> abre muitas portas para análises de dados! Neste post fizemos um exemplo simples de automação de relatórios porém esses resultados podem ser cada vez mais customizáveis e utilizados em RPA - <a href="https://en.wikipedia.org/wiki/Robotic_process_automation">Robotic Process Automation</a> - de forma que seja possível automatizar processos que antes só poderiam ser executados por humanos!</p>
</div>
<div id="referencias" class="section level1">
<h1>Referencias</h1>
<ul>
<li><a href="https://cran.r-project.org/web/packages/gganimate/vignettes/gganimate.html" class="uri">https://cran.r-project.org/web/packages/gganimate/vignettes/gganimate.html</a></li>
<li><a href="https://cran.r-project.org/web/packages/ggforce/vignettes/Visual_Guide.html" class="uri">https://cran.r-project.org/web/packages/ggforce/vignettes/Visual_Guide.html</a></li>
<li><a href="https://cran.r-project.org/web/packages/ggExtra/vignettes/ggExtra.html" class="uri">https://cran.r-project.org/web/packages/ggExtra/vignettes/ggExtra.html</a></li>
<li><a href="https://cran.r-project.org/web/packages/gapminder/gapminder.pdf" class="uri">https://cran.r-project.org/web/packages/gapminder/gapminder.pdf</a></li>
<li><a href="https://www.gapminder.org/data/" class="uri">https://www.gapminder.org/data/</a></li>
<li><a href="https://stackoverflow.com/questions/43873345/knit-child-in-a-loop-variable-as-title" class="uri">https://stackoverflow.com/questions/43873345/knit-child-in-a-loop-variable-as-title</a></li>
</ul>
</div>
<div id="apendice" class="section level1">
<h1>Apendice</h1>
<div id="função-analise.r" class="section level2">
<h2>Função <code>analise.R</code></h2>
<p>Veja o conteúdo da função <code>analise.R</code> preparada para esta analise:</p>
<pre class="r"><code># Funcao para analise por ano:
analise_gapminder &lt;- function(x, title){
  
  # Carregar dependencias:
  require(broom)
  require(ggforce)
  require(ggpmisc)
  require(ggExtra)
  
  # Funcao para customizar legendas:
  custom_legend &lt;- function(x){comma(x, big.mark = &quot;.&quot;,decimal.mark = &quot;,&quot;)}
  
  # Obter dados do Brasil:
  brazil &lt;- x %&gt;% filter(country == &quot;Brazil&quot;)
  
  # Resultados do ajuste de regressao ---------------------------------------
  mytable &lt;- 
    lm(lifeExp ~ gdpPercap, data = x) %&gt;% 
    tidy() %&gt;% 
    mutate_if(is.numeric, ~round(.x, 4)) %&gt;% 
    `colnames&lt;-`(c(&quot;Termo&quot;, &quot;Estimativa&quot;, &quot;Desv.Pad.&quot;, &quot;Estatistica&quot;, &quot;Valor p&quot;))
  
  # r2:
  r2 &lt;- round(summary(lm(lifeExp ~ gdpPercap, data = x))$r.squared,4)*100
  
  # residuos do modelo:
  res &lt;- lm(lifeExp ~ gdpPercap, data = x)$residuals
  
  # resutado para teste de kolmogorov-smirnov
  ks_test &lt;- ks.test(res, &quot;pnorm&quot;, mean(res), sd(res))$p.value %&gt;% round(5)
  
  # Grafico geral com regressao e boxplots ----------------------------------
  grafico_geral_regressao &lt;- 
    x %&gt;% 
    ggplot(aes(x = gdpPercap, y = lifeExp, size = pop, label = country, color = country)) %+%
    geom_point(show.legend = F) %+%
    geom_text(show.legend = F, size = 3, nudge_y = -0.5) %+%
    scale_size_continuous(labels = custom_legend) %+%
    scale_x_log10(labels = custom_legend) %+%
    scale_color_manual(values = country_colors) %+%
    geom_smooth(se=F, color = &quot;black&quot;, show.legend = F, method = &quot;lm&quot;) %+%
    annotate(&quot;segment&quot;, color=&quot;blue&quot;, arrow=arrow(length=unit(0.05,&quot;npc&quot;)),
             x=brazil$gdpPercap, xend=brazil$gdpPercap,
             y=brazil$lifeExp-6, yend=brazil$lifeExp-1) %+%
    annotate(&quot;text&quot;, color=&quot;blue&quot;, label = &quot;Brasil&quot;,
             x=brazil$gdpPercap, y=brazil$lifeExp-7) %+%
    labs(title = paste0(title, &quot;: lifeExp ~ gdpPercap&quot;),
         subtitle = &quot;Regressão linear e destaque no Brasil&quot;,
         caption = paste0(&quot;R² do modelo: &quot;, r2, &quot;\n&quot;,&quot;p valor para ks.test: &quot;, ks_test),
         x = &quot;gdpPercap (Transformação log10)&quot;) %+%
    annotate(geom = &quot;table&quot;, x = Inf, y = -Inf,
             label = list(mytable), 
             vjust = 0, hjust = 1) %&gt;%  
    ggMarginal(type = &quot;boxplot&quot;, fill=&quot;transparent&quot;,size = 10)
  
  # Comportamento separado por continente -----------------------------------
  grafico_por_continente &lt;- 
    x %&gt;% 
    filter(continent != &quot;Oceania&quot;) %&gt;% 
    ggplot(aes(x = gdpPercap, y = lifeExp, size = pop, label = country, color = country)) %+%
    geom_point(show.legend = F) %+%
    geom_text(show.legend = F, size = 3, nudge_y = -0.5) %+%
    facet_wrap(~continent, scales = &quot;free&quot;) %+%
    scale_x_continuous(labels = custom_legend) %+%
    scale_color_manual(values = country_colors) %+% 
    geom_smooth(method = &quot;lm&quot;, color = &quot;black&quot;, se=F, show.legend = F) %+%
    labs(title = paste0(title, &quot;: lifeExp ~ gdpPercap, por continente&quot;))
  
  # Acima da media ----------------------------------------------------------
  grafico_zoom_acima_media &lt;- 
    x %&gt;% 
    ggplot(aes(x = gdpPercap, y = lifeExp, size = pop, label = country, color = country)) %+%
    geom_point(show.legend = F) %+% 
    geom_text(show.legend = F, size = 3, nudge_y = -0.5) %+%
    scale_size_continuous(labels = custom_legend) %+%
    scale_x_continuous(labels = custom_legend) %+%
    scale_color_manual(values = country_colors) %+%
    facet_zoom(y = lifeExp   &gt; median(x$lifeExp),
               x = gdpPercap &gt; median(x$gdpPercap), split = T) %+%
    geom_smooth(se=F, color = &quot;red&quot;, show.legend = F, method = &quot;loess&quot;)  %+%
    labs(title = paste0(title, &quot;: lifeExp ~ gdpPercap com zoom nos países acima da mediana&quot;))
  
  # Abaixo da media ---------------------------------------------------------
  grafico_zoom_abaixo_media &lt;- 
    x %&gt;% 
    ggplot(aes(x = gdpPercap, y = lifeExp, size = pop, label = country, color = country)) %+%
    geom_point(show.legend = F) %+%
    geom_text(show.legend = F, size = 3, nudge_y = -0.5) %+%
    scale_size_continuous(labels = custom_legend) %+%
    scale_x_continuous(labels = custom_legend) %+%
    scale_color_manual(values = country_colors) %+%
    facet_zoom(y = lifeExp   &lt; median(x$lifeExp),
               x = gdpPercap &lt; median(x$gdpPercap), split = T) %+%
    geom_smooth(se=F, color = &quot;red&quot;, show.legend = F, method = &quot;loess&quot;)   %+%
    labs(title = paste0(title, &quot;: lifeExp ~ gdpPercap com zoom nos países abaixo da mediana&quot;))
  
  # Output ------------------------------------------------------------------
  list(
    brazil  = brazil,
    mytable = mytable,
    r2      = r2,
    grafico_geral_regressao   = grafico_geral_regressao,
    grafico_por_continente    = grafico_por_continente,
    grafico_zoom_acima_media  = grafico_zoom_acima_media,
    grafico_zoom_abaixo_media = grafico_zoom_abaixo_media,
    ks_test = ks_test
  )
}</code></pre>
</div>
</div>

        <p><strong>Leia o post completo em:</strong> <a href="https://gomesfellipe.github.io/post/2019-09-13-relatorios-automaticos-com-rmarkdown/relatorios-automaticos-com-rmarkdown/">Como automatizar relatórios longos e repetitivos com RMarkdown</a></p>
        <p><em>Este post foi originalmente publicado em <a href="https://gomesfellipe.github.io/">Fellipe Gomes - Data Science Blog</a></em></p>
      ]]></content:encoded>
      <category>Fundamentos de Data Science</category>
      <category>Inteligência Artificial</category>
      <category>Machine Learning</category>
      <category>Programação e Ferramentas</category>
      <category domain="tag">data-mining</category>
      <category domain="tag">estatistica</category>
      <category domain="tag">otimizacao</category>
      <category domain="tag">pratica</category>
      <category domain="tag">r</category>
      <category domain="tag">regressao</category>
      <category domain="tag">relatorios</category>
      <category domain="tag">reports</category>
      <category domain="tag">rmarkdown</category>
      <category domain="tag">rstudio</category>
    </item>
    <item>
      <title>Um ano de blog!</title>
      <link>https://gomesfellipe.github.io/post/2018-12-26-retrospectiva/retrospectiva/</link>
      <pubDate>Wed, 26 Dec 2018 00:00:00 +0000</pubDate>
      <author>gomes.fellipe1@gmail.com (Fellipe Carvalho Gomes)</author>
      <guid>https://gomesfellipe.github.io/post/2018-12-26-retrospectiva/retrospectiva/</guid>
      <description>Este post traz uma retrospectiva do que aconteceu por aqui em 1 ano de blog, foi muito empolgante o término do desafio que fiz a mim mesmo e a animação para novos desafios continua!</description>
      <content:encoded>&lt;![CDATA[
        


<style type="text/css">
.column-left{
  float: left;
  width: 33%;
  text-align: center;
}
.column-center{
  display: inline-block;
  width: 33%;
  text-align: center;
}
.column-right{
  float: right;
  width: 33%;
  text-align: center;
}

# left {
#   left:-8.33%;
#   text-align: left;
#   float: left;
#   width:50%;
#   z-index:-10;
# }
# 
# right {
#   left:31.25%;
#   top: 75px;
#   float: right;
#   text-align: right;
#   z-index:-10;
#   width:50%;
# }

</style>
<div id="até-que-um-dia.." class="section level2">
<h2>Até que um dia..</h2>
<p>Agora em dezembro encerro um desafio pessoal de fazer pelo menos um post por mês durante o ano de 2018 e estou muito animado com o término deste ciclo! Espero ter contribuído um pouquinho com a comunidade de Estatística e Ciência de Dados que está maior a cada dia e cada vez mais importante.</p>
<p>A ideia de fazer um blog <strong>começou</strong> quando me deparei que tinha muitos scripts e rotinas guardados de alguns estudos sobre programação e estatística tanto sobre os assuntos da faculdade quanto sobre estudos avulsos de programação em R. Guardar os scripts de maneira organizada para relembrar e tentar fixar melhor alguns conceitos já vistos pode ser uma boa idéia acelerando o processo de busca por soluções para problemas computacionais do dia a dia.</p>
<p>Desde o início da graduação tomei o hábito de guardar todos meus arquivos no Dropbox (que é excelente ferramenta, inclusive porque é possível <a href="https://gomesfellipe.github.io/post/gerenciando-arquivos-do-dropbox-com-r/gerenciando-arquivos-do-dropbox-com-r/">integrar com o R/Shiny</a>). <strong>Até que um dia</strong> me dei conta de que estava acumulando cada vez mais scripts e relatórios em meu dropbox e além de não ser muito prático o acesso aos scripts, acaba não sendo muito dinâmico no compartilhamento com os membros da equipe, então passei a utilizar o <a href="https://github.com/gomesfellipe">Github</a> para hospedar meus códigos, projetos, funções e estudos que poderiam tornar-se públicos e assim facilitar na hora de compartilhar algum código ou receber algum feedback.</p>
<p>Além do <a href="https://github.com/gomesfellipe">Github</a>, o <a href="%5BGithub%5D(https://github.com/gomesfellipe)">RPubs</a> também foi útil para publicação de alguns trabalhos/projetos durante a graduação e alguns <a href="https://www.kaggle.com/gomes555">testes e contribuições nas competições e conjuntos de dados do Kaggle</a> (além de bisbilhotar as resoluções dos top players) para aprender de uma maneira diferente um pouquinho mais a cada dia. Já no caso de trabalhos privados (solo ou em equipe), o <a href="https://bitbucket.org/">Bitbucket</a> também tem se mostrado uma ótima ferramenta.</p>
<p>Passei a receber feedback sobre meus códigos, sugestões de melhorias e isso me motivou a <strong>continuar</strong> e <strong>persistir</strong> nos posts independente de monografia, estágio, trabalho, ou qualquer outro compromisso super importante. Firmei esse desafio pessoal e abaixo será possível conferir um pouco de como foi minha evolução, algumas técnicas e curiosidades que aprendi e achei que valia a pena compartilhar com a comunidade.</p>
<p><br></p>
<hr />
<div id="análise-de-sobrevivência-com-dados-do-jogo-pubg-disponíveis-no-kaggle" class="section level4 column-left">
<h4>Análise de sobrevivência com dados do jogo pubg disponíveis no kaggle</h4>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/post/2018-11-28-pubg-sobrevivencia-kaggle/pubg-sobrevivencia-kaggle/"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/nov.png" title="Análise de sobrevivência com dados do jogo pubg disponíveis no kaggle" style="width:80.0%" alt="nov" /></a></p>
<p>Calcular a probabilidade de um indivíduo sobreviver e também encontrar fatores de risco de morte em um intervalo de tempo. Foram realizadas estatísticas descritivas e o ajuste de modelos de sobrevivência como o de Kaplan-Meier e o Modelo de regressão de riscos proporcionais de Cox.</p>
</div>
<div id="seu-app-rstudio-e-shiny-server-na-nuvem-do-google" class="section level4 column-center">
<h4>Seu app, RStudio e Shiny Server na nuvem do Google</h4>
<p><a href="https://gomesfellipe.github.io/post/2018-10-27-server-cloud/server-cloud/"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/out.png" title="Seu app, RStudio e Shiny Server na nuvem do Google" style="width:80.0%" alt="out" /></a></p>
<p><br></p>
<p>Aprendemos como dar início à uma máquina virtual rodando Linux Ubuntu 16.04 no servidor do Google Cloud. Com nossa máquina virtual na configuração desejada somos capazes de dar início ao nosso próprio RStudio Server e também nosso Shiny Server para facilitar a entrega de nossas aplicações, como a que foi criada de exemplo no post para acompanhar as cotações e algumas ações de bolsas de valores americanas.</p>
</div>
<div id="com-que-frequência-ocorrem-acidentes-na-ponte-rio-niteroi" class="section level4 column-right">
<h4>Com que frequência ocorrem acidentes na ponte rio-niteroi?</h4>
<p><a href="https://gomesfellipe.github.io/post/2018-09-29-freq-acidente-ponte-rio-niteroi.md/freq-acidente-ponte-rio-niteroi/"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/set.jpg" title="Com que frequência ocorrem acidentes na ponte rio-niteroi?" style="width:80.0%" alt="set" /></a></p>
<p><br></p>
<p>Neste post utilizamos os dados públicos fornecidos pela polícia rodoviária federal para responder algumas perguntas relacionadas à ocorrência de acidentes. Será que o número de acidentes vem diminuindo? Será que a instalação de câmeras de segurança reduziu o número de acidentes? Uma breve análise de caráter descritivo irá ajudar a entender o comportamento dos dados e permitir novas reflexões.</p>
</div>
<p><br></p>
<hr />
<div id="um-estudo-sobre-modelos-de-aprendizagem-baseados-em-árvores-com-desafio-do-kaggle" class="section level3 column-left">
<h3>Um estudo sobre modelos de aprendizagem baseados em árvores com desafio do kaggle</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/img/2018/08/img1.png"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/jul.png" title="Um estudo sobre modelos de aprendizagem baseados em árvores com desafio do kaggle" style="width:80.0%" /></a></p>
<p>Utilizamos a base de dados da competição do Kaggle <a href="https://www.kaggle.com/c/house-prices-advanced-regression-techniques/">House Prices: Advanced Regression Techniques</a> para colocar em prática alguns dos conhecimentos adquiridos estudando sobre algoritmos como árvore de decisão, random forest, gradient boost machine e por fim uma regressão linear para comparar os resultados obtidos</p>
</div>
<div id="ajustando-um-modelo-de-regressão-linear-bayesiano-do-zero" class="section level3 column-center">
<h3>Ajustando um modelo de regressão linear bayesiano do zero</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/img/2018/07/img1.png"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/jun.png" title="Ajustando um modelo de regressão linear bayesiano do zero" style="width:80.0%" /></a></p>
<p>Neste post são realizados os cálculos das distribuições condicionais completas a posteriori (DCCP) para cada parâmetro do ajuste de um modelo de regressão linear bayesiano para poder implementar o algoritmo do amostrador de Gibbs em dados simulados (para conferir a qualidade do ajuste do modelo) e em dados reais. Este post é o resumo de uma das aplicações que fiz em um projeto de iniciação à pesquisa que deixei disponível no Github</p>
</div>
<div id="brasil-x-argentina-tidytext-e-machine-learning" class="section level3 column-right">
<h3>Brasil x Argentina, tidytext e machine learning</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/img/2018/06/img.jpg"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/mai.jpg" title="Brasil x Argentina, tidytext e machine learning" style="width:80.0%" /></a></p>
<p>Nesta época eu estava estudando o livro da Julia Silge depois de uma palestra que assisti no SER 2018 e aproveitando o embalo da copa do mundo resolvi conferir os dados do twitter disponibilizados através da API do Twitter naquela época para uma aplicação de análise de sentimentos utilizando a abordagem <code>tidytext</code>. Além disso foram utilizados os modelos knn, random forest, naive bayes e um modelo de regressão logístico para um estudo sobre classificação em análises de texto com o pacote caret</p>
</div>
<p><br></p>
<hr />
<div id="aed-de-forma-rápida-e-um-pouco-de-machine-learning" class="section level3 column-left">
<h3>AED de forma rápida e um pouco de machine learning</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/img/2018/05/img1.png"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/abr.png" title="AED de forma rápida e um pouco de machine learning" style="width:80.0%" /></a></p>
<p>Este post veio para lembrar como a análise exploratória em R não precisa sempre ser uma tarefa longa e trabalhosa. Com o pacote SmartEAD é possível gerar muitos gráficos com poucas linhas de código. Ao longo do post algumas tarefas de machine learning são executadas, como k-means (tarefa não-supervisionada de agrupamento), um modelo de regressão linear com stepwise (tarefa supervisionado de regressão) e um modelo random forest (tarefa supervisionada de classificação)</p>
</div>
<div id="séries-temporais-com-google-trends-e-r" class="section level3 column-center">
<h3>Séries temporais com google trends e R</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/img/2018/04/img1.png"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/abr2.png" title="Séries temporais com google trends e R" style="width:80.0%" /></a></p>
<p><br></p>
<p>Como é fácil obter dados do Google Trends para analisá-los no RStudio. Obtivemos algumas séries e duas delas chamaram mais a atenção: a popularidade do termo <code>Big Data</code> (que está aumentando) e a popularidade do termo <code>Estatística</code> que estava diminuindo. Realizamos a decomposição da série, realizamos alguns testes estatísticos para detectar significância dos componentes das séries e foram ajustados modelos de Holt Winters para tentar prever o comportamento destas séries no próximo ano.</p>
<p><br>
<br>
<br>
<br></p>
</div>
<div id="produzindo-e-formatando-um-documento-word-direto-em-r" class="section level3 column-right">
<h3>Produzindo e formatando um documento word direto em R</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/img/2018/03/Word-R.png"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/mar.png" title="Produzindo e formatando um documento word direto em R" style="width:80.0%" /></a></p>
<p><br></p>
<p>O bom de programar em R é que não precisamos nos limitar apenas à ferramenta, podemos importar e exportar arquivos em diferentes formatos e entregas nossos resultados de muitas maneiras. Neste post é mostrado como exportar seus relatórios em Word utilizando um template.</p>
<p><br>
<br>
<br>
<br>
<br></p>
</div>
<p><br></p>
<hr />
<div id="o-que-são-cheatsheets-gamificação-e-por-que-aprender-r-é-tão-divertido" class="section level3 column-left">
<h3>O que são cheatsheets, gamificação e por que aprender R é tão divertido?</h3>
<p><a href="https://gomesfellipe.github.io/post/2018-02-17-cheatsheet-gamificacao-r/cheatsheet-gamificacao-r/"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/fev.png" title="O que são cheatsheets, gamificação e por que aprender R é tão divertido?" style="width:80.0%" /></a></p>
<p>A aprendizagem é um processo que nunca acaba e neste post mostro algumas maneiras de estudar R e estatística se divertindo! Falamos o que são as <a href="https://www.rstudio.com/resources/cheatsheets/">CheatSheets</a>, cursos da <a href="https://www.datacamp.com">DataCamp</a>, onde é possível ter cursos altamente práticos com os desenvolvedores dos principais pacotes utilizando em Ciência de Dados e falamos sobre a plataforma <a href="https://www.kaggle.com">Kaggle</a>, um verdadeiro playgroud para Cientistas de dados que podem disputar por posições em um rank mundial e compartilhar códigos e análises para ter o feedback de outros cientistas de dados ao redor do mundo</p>
</div>
<div id="carnaval-e-mapas-interativos-com-r" class="section level3 column-center">
<h3>Carnaval e mapas interativos com R</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/img/2018/02/carnaval2.png"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/fev2.png" title="Carnaval e mapas interativos com R" style="width:80.0%" /></a></p>
<p><br></p>
<p>Era fevereiro, véspera de carnaval e grande parte das pessoas no Rio de Janeiro gostariam de responder a seguinte pergunta: “Onde estão os blocos?”. Neste post construímos mapas interativos com o uso do pacote leaflet e em poucas linhas de código foi possível mapear os blocos ao redor do Rio de Janeiro facilitando assim a vida do folião carioca</p>
<p><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br></p>
</div>
<div id="o-paradoxo-dos-aniversários-com-simulação-e-probabilidade" class="section level3 column-right">
<h3>O paradoxo dos aniversários com simulação e probabilidade</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/img/2018/01/modelagem-probabilidade2.png"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/jan1.png" title="O paradoxo dos aniversários com simulação e probabilidade" style="width:80.0%" /></a></p>
<p><br></p>
<p>A probabilidade é contra intuitiva. Existem diversos exemplos clássicos de probabilidade que nos mostram como pode ser enganosa nossa intuição ao tratar com a incerteza. Neste post utilizamos de simulação e de teoria das probabilidades para mostra como a probabilidade de duas pessoas fazerem aniversário no mesmo dia em uma sala de aula aumenta muito rápido conforme aumentamos o número de alunos nessa sala.</p>
<p><br></p>
</div>
<p><br></p>
<hr />
<div id="tabelas-incriveis-com-r" class="section level3 column-left">
<h3>Tabelas incriveis com R</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/post/2018-01-12-tabelas-incriveis-com-r/tabelas-incriveis-com-r/"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/jan2.jpg" title="Tabelas incriveis com R" style="width:80.0%" /></a></p>
<p><br></p>
<p>As saídas do console do R podem não ser a melhor forma de entregas suas valiosas análises. Quando estamos numa situação de negócios ou consultoria a apresentação dos dados também é muito importante e o R não fica para trás nisso! Neste post vimos alguns pacotes como o DT, knitr, kableExtra, formattable, sparkline e rhandsontable podem tornar a apresentação de nossas tabelas muito mais elegantes</p>
<p><br></p>
</div>
<div id="análise-multivariada-com-r" class="section level3 column-center">
<h3>Análise multivariada com R</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/post/2018-01-01-analise-multivariada-em-r/an%C3%A1lise-multivariada-em-r/"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/jan3.png" title="Análise multivariada com R" style="width:80.0%" /></a></p>
<p><br></p>
<p>Em tempos de Big Data esse campo da estatística torna-se cada vez mais importante. Saber lidar com grandes volumes e variedades de dados pode ser muito importante e neste post vimos um pouco sobre técnicas de estatística multivariada como PCA, Análise Fatorial, Clusterização com agrupamento hierárquico e com k-means</p>
<p><br></p>
</div>
<div id="pacotes-do-r-para-avaliar-o-ajuste-de-modelos" class="section level3 column-right">
<h3>Pacotes do R para avaliar o ajuste de modelos</h3>
<p><br></p>
<p><a href="https://gomesfellipe.github.io/post/2017-12-24-diagnostico-de-modelo/diagnostico-de-modelos/"><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/dez.jpg" title="Pacotes do R para avaliar o ajuste de modelos" style="width:80.0%" /></a></p>
<p><br></p>
<p>O Modelo de regressão linear é uma ótima ferramenta para qualquer estatístico, ele é altamente interpretável e seu a avaliação de seu desempenho pode ser feita de forma meticulosa. Neste post utilizamos os pacotes GGally e o ggfortify para fazer diagnósticos bem elaborados sobre as premissas que sustentam o uso de tais modelos</p>
<p><br></p>
</div>
<p><br></p>
<hr />
</div>
<div id="além-disso" class="section level2">
<h2>Além disso…</h2>
<p>Além dos posts acima, também já passou por aqui:</p>
<div id="posts-mais-antigos" class="section level3">
<h3>Posts mais antigos <i class='fa fa-coffee'></i></h3>
<p>Além dos posts acima que ficaram em destaque, por aqui também foram postados:</p>
<ul>
<li><a href="https://gomesfellipe.github.io/post/2017-12-18-bayesiana-jags-mcmcplot/bayesiana-jags-mcmcplot/">AJUSTANDO MODELOS BAYESIANOS COM JAGS</a></li>
<li><a href="https://gomesfellipe.github.io/post/2017-12-17-string/string/">MANIPULAÇÃO DE STRINGS E TEXT MINING</a></li>
<li><a href="https://gomesfellipe.github.io/post/2017-12-14-criando-relat%C3%B3rios-com-template-tufle/criando-relat%C3%B3rios-com-template-tufle/">CRIANDO RELATÓRIOS COM TEMPLATE TUFLE</a></li>
<li><a href="https://gomesfellipe.github.io/post/2017-12-07-manipulando-dados-com-dplyr/manipulando-dados-com-dplyr/">MANIPULANDO DADOS COM DPLYR</a></li>
<li><a href="https://gomesfellipe.github.io/post/analisando-o-mercado-de-cryptomoedas-com-r/">ANALISANDO O MERCADO DE CRYPTOMOEDAS COM R</a></li>
<li><a href="https://gomesfellipe.github.io/post/gerenciando-arquivos-do-dropbox-com-r/gerenciando-arquivos-do-dropbox-com-r/">GERENCIANDO ARQUIVOS DO DROPBOX COM R</a></li>
<li><a href="https://gomesfellipe.github.io/post/tipos-de-relacoes-entre-variaveis/">TIPOS DE RELAÇÕES ENTRE VARIÁVEIS</a></li>
<li><a href="https://gomesfellipe.github.io/post/tipos-de-correlacoes/">TIPOS DE CORRELACOES</a></li>
</ul>
</div>
<div id="aplicativos-shiny" class="section level3">
<h3>Aplicativos Shiny</h3>
<p>Esses são os aplicativos para uso público que desenvolvi (alguns ainda em faze de aprendizagem) que contam com os códigos hospedados no Github, além deles desenvolvi uma porção de aplicações que estão hospedadas no Bitbucket porém como são privados não poderei compartilha-las aqui:</p>
<ul>
<li><a href="https://github.com/gomesfellipe/dashboard-text-mining-1">Dashboard com textmining de mídias sociais</a></li>
<li><a href="https://github.com/gomesfellipe/appwordcloud">App para criação de núvens de palavras cusmomizadas</a></li>
<li><a href="https://github.com/gomesfellipe/app_acoes">App para acompanhar cotações de ações da bolsa de valores americana (e algumas ações BR)</a></li>
<li><a href="https://github.com/gomesfellipe/appPCAkmeans">App para rápica aplicação de componentes principais e do algoritmo de machine learning k-means</a></li>
</ul>
</div>
<div id="iniciação-à-pesquisa" class="section level3">
<h3>Iniciação à Pesquisa:</h3>
<p>Este foi um estudo sobre modelagem hierárquica sob a ótica da escola bayesiana para me preparar para escrever minha monografia, que contou com uma aplicação deste modelo na vida real:</p>
<ul>
<li><a href="https://github.com/gomesfellipe/projeto_modelos_hierarquicos_bayesianos">Projeto de Iniciação à Pesquisa: Modelos Hierárquicos Bayesianos</a></li>
</ul>
</div>
<div id="writer-da-ensina.ai" class="section level3">
<h3>Writer da ENSINA.AI</h3>
<p>Esse ano também recebi um convite inesperado de participar como escritor contribuidor da página <a href="https://medium.com/ensina-ai">ENSINA.AI</a> no medium, que tem como compromisso trazer ao público: Tudo sobre Inteligência Artificial em Português. Fiquei muito feliz com o convite pois já acompanhava a página e os posts sempre são muito bons! Os posts que contribui foram:</p>
<ul>
<li><a href="https://medium.com/ensina-ai/com-que-frequ%C3%AAncia-ocorrem-acidentes-na-ponte-rio-niter%C3%B3i-58d7f779c6d0">Com que frequência ocorrem acidentes na ponte Rio-Niterói?</a></li>
<li><a href="https://medium.com/ensina-ai/seu-app-rstudio-e-shiny-na-nuvem-do-google-31753d71619">Seu app, RStudio e Shiny na nuvem do Google</a></li>
<li><a href="https://medium.com/ensina-ai/um-estudo-sobre-modelos-de-aprendizagem-baseados-em-%C3%A1rvores-com-desafio-do-kaggle-a73c32abc9f1">Um estudo sobre modelos de aprendizagem baseados em árvores com desafio do Kaggle</a></li>
<li><a href="https://medium.com/ensina-ai/ajustando-um-modelo-de-regress%C3%A3o-linear-bayesiano-do-zero-c2a8c2351202">Ajustando um modelo de regressão linear bayesiano do zero</a></li>
</ul>
</div>
<div id="extras" class="section level3">
<h3>Extras <i class='fa fa puzzle-piece'></i> :</h3>
<ul>
<li><a href="https://gomesfellipe.github.io/itemized/item2/">BANCOS DE DADOS PÚBLICOS - Apresentando alguns sites que disponibilizam dados públicos</a></li>
<li><a href="https://gomesfellipe.github.io/itemized/item1/">SOBRE OMBROS DE GIGANTES - Algumas frases de pensadores que me inspiram</a></li>
</ul>
<p><br></p>
<hr />
<p><br></p>
</div>
</div>
<div id="boas-festas" class="section level1">
<h1>Boas festas!</h1>
<p>Agora o ano está se encerrando e assim se encerra mais um ciclo, estou muito satisfeito pois aprendi muita coisa nova, interagi com muita gente inteligente e me diverti demais na produção deste blog.</p>
<p>Foram diversos desafios pois no começo foi bem complicado entender como manipular <code>html</code>, <code>css</code> e controlar as versões dos códigos no <code>git</code> pois era tudo muito novo mas o desafio valeu a pena, hoje aprendi um pouquinho sobre essas e outras ferramentas que um estatístico não vê na graduação e foi bem proveitoso em meus trabalhos. Se consegui ajudar pelo menos uma pessoa já atingi minha meta, se ajudei duas pessoas então consegui dobrar essa meta!</p>
<div class="row">
<div class="col-sm-6">
<p><img vspace="20"></p>
<blockquote>
<p>Se souber exatamente o que fazer, qual a vantagem de fazê-lo? - <em>Pablo Picasso</em></p>
</blockquote>
</div>
<!-- <div class="column-center"> -->
<!-- <img vspace="100"> -->
<!-- </div> -->
<div class="col-sm-6">
<p><img src="/post/2018-12-26-retrospectiva/retrospectiva_files/picasso-victorian-house.jpg" style="width:60.0%" /></p>
</div>
</div>
<hr />
<p>Agora no ano de 2019 “fazer pelo menos um post por mês” não estará em meus planos, mas já tenho diversas ideias de posts e continuarei escrevendo em um ritmo um pouco mais calmo pois os estudos estão cada vez mais difíceis!</p>
<p>Espero que tenham gostado do conteúdo e obrigado por toda ajuda direta ou indiretamente de cada membro da comunidade que fez valer a pena cada minuto de esforço!</p>
</div>

        <p><strong>Leia o post completo em:</strong> <a href="https://gomesfellipe.github.io/post/2018-12-26-retrospectiva/retrospectiva/">Um ano de blog!</a></p>
        <p><em>Este post foi originalmente publicado em <a href="https://gomesfellipe.github.io/">Fellipe Gomes - Data Science Blog</a></em></p>
      ]]></content:encoded>
      <category>Fundamentos de Data Science</category>
      <category>Programação e Ferramentas</category>
      <category domain="tag">estatistica</category>
      <category domain="tag">kaggle</category>
      <category domain="tag">machine-learning</category>
      <category domain="tag">retrospectiva</category>
      <category domain="tag">rmarkdown</category>
      <category domain="tag">rstudio</category>
      <category domain="tag">shiny</category>
    </item>
    <item>
      <title>Produzindo e formatando um documento Word direto em R</title>
      <link>https://gomesfellipe.github.io/post/2018-03-07-word-e-r-2/word-e-r-2/</link>
      <pubDate>Wed, 07 Mar 2018 00:00:00 +0000</pubDate>
      <author>gomes.fellipe1@gmail.com (Fellipe Carvalho Gomes)</author>
      <guid>https://gomesfellipe.github.io/post/2018-03-07-word-e-r-2/word-e-r-2/</guid>
      <description>As análises foram feitas em R e agora? Geralmente um bom PDF ou HTML são suficientes mas e se o destino da análise tiver que ser um documento Word?</description>
      <content:encoded>&lt;![CDATA[
        
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<div id="relatórios-de-alta-qualidade-só-com-latex" class="section level1">
<h1>Relatórios de alta qualidade só com <span class="math inline">\(\LaTeX\)</span>?</h1>
<p>Como já mencionei no <a href="https://gomesfellipe.github.io/post/2018-01-12-tabelas-incriveis-com-r/tabelas-incriveis-com-r/">post sobre tabelas incríveis com R</a>, a tarefa de um estatístico (ou Data Scientist, em sua versão diluída e mais comercial) vai muito além do planejamento, análises, inferência, sumarização e interpretação de observações para fornecer a melhor informação possível a partir do dados disponíveis. A produção final dos relatórios é fundamental e na grande maioria das vezes utiliza-se a linguagem <span class="math inline">\(\LaTeX\)</span>, mas será que ela é realmente a única opção?</p>
<p>A escrita para a produção de documentação técnica e científica de alta qualidade é tão importante que até o <a href="https://www.prof-edigleyalexandre.com/2017/10/agora-facebook-messenger-permite-que-voce-escreva-formulas-matematicas-basicas-laTex.html">Facebook permite usar a linguagem <span class="math inline">\(\LaTeX\)</span> no messenger</a>. Normalmente para gerar arquivos em <span class="math inline">\(\LaTeX\)</span> existem muitas opções de softwares ou mesmo opções online como o <a href="https://www.overleaf.com/">overleaf</a> ou o <a href="https://pt.sharelatex.com/">sharelatex</a> que permitem escrever os documentos online com compilação em tempo real e armazenamento automático na nuvem. Para esse tipo de relatório escrito puramente em <span class="math inline">\(\LaTeX\)</span>, as funções dos pacotes <a href="https://cran.r-project.org/web/packages/stargazer/">stargazer</a>, <a href="https://cran.r-project.org/web/packages/xtable/index.html">xtable</a>, <a href="https://cran.r-project.org/web/packages/pander/index.html">pander</a> dentre outros, podem ser muito úteis na tarefa de produzir as tabelas dos resultados obtidos das análises em R para o formato <span class="math inline">\(\LaTeX\)</span>.</p>
<p>Além desses softwares a linguagem <span class="math inline">\(\LaTeX\)</span> pode ser utilizada diretamente de dentro do R em duas opções: O documento R Sweave e o documento Rmarkdown. Se for em Rmarkdown será necessária algumas configurações, como por exemplo algumas vezes a opção <code>results = "asis"</code> deve ser incluída nos chunks que deseja-se renderizar as tabelas <span class="math inline">\(\LaTeX\)</span>, caso seja R Sweave, pode ser que <a href="https://stat.epfl.ch/webdav/site/stat/shared/Regression/EPFL-Sweave-powerdot.pdf">essa documentação</a> ajude, pois as configurações dos chunks podem ser diferentes das configurações utilizadas em R markdown).</p>
<p>Porém, não basta obter informação através dos dados e com técnicas específicas transformá-los em conhecimento, geralmente tal conhecimento será destinado para alguma finalidade e não necessariamente a pessoa que irá receber nossos resultados vai desejar um documento em PDF ou html, além de não trabalhar com <a href="https://www.latex-project.org/"><span class="math inline">\(\LaTeX\)</span></a> nem conhecer as linguagens de programação muito utilizadas por nós, como <a href="https://www.r-project.org/">R</a> ou <a href="https://pt.wikipedia.org/wiki/Markdown">Markdown</a>. Na verdade isso nem é mesmo uma obrigação para quem contrata serviços de analytics.</p>
</div>
<div id="relatórios-em-word" class="section level1">
<h1>Relatórios em Word</h1>
<p>A partir do momento que é assumida a responsabilidade do entendimento da informação que passamos, acaba sendo necessário sair da nossa zona de conforto e aprender a falar na língua de quem nos ouve, para que a informação seja passada da maneira mais clara possível.</p>
<p>É muito comum criarmos nossas figuras e tabelas super elegantes e rechear nossos relatórios com as mais espertas interpretações a cerca dos resultados e compilar tudo em um arquivo .PDF (geralmente ao se utilizar <span class="math inline">\(\LaTeX\)</span>) ou mesmo em .html (muito comum ao se utilizar Rmarkdown), porém muitas vezes nossos resultados serão reaproveitados em documentos escritos em outros formatos e uma das escolhas optadas em escala mundial é escrever documentos em Word.</p>
<p>Geralmente quem trabalha com programação está sempre atento a otimizar seus processos, portanto integrar nossos resultados do R com um documento em Word é uma tarefa que pode ser muito útil dependendo da finalidade dos nossos dados.</p>
<p>Existem extensões para escrever <span class="math inline">\(\LaTeX\)</span> diretamente no word, como por exemplo o <a href="http://texpoint.necula.org/">TexPoint</a> que permite escrever invocações e definições de macro <span class="math inline">\(\LaTeX\)</span> junto com seu texto normal ou o <a href="http://aurora.pt.downloadastro.com/">Aurora</a> que é um programa de edição de texto que permite introduzir funções matemáticas complexas em texto de modo a esboçar relatórios e outras mensagens com caracteres únicos e equações. Particularmente nunca usei nenhuma das duas opções mas elas estão aí para quem quiser testar.</p>
<p>A extensão para word chamada <a href="http://www.grindeq.com/index.php?p=latex2word">GrindEQ™ Math Utilities</a> que permite fazer a conversão do documento <span class="math inline">\(\LaTeX\)</span> para word já foi muito útil para mim, porém muitas vezes ocorriam bugs na formatação e com a finalidade de focar os esforços nas análises e não na formatação, uma busca por alguma maneira de que a isso pudesse ser feito totalmente em R e o arquivo final ser um documento word já formatado pareceu interessante.</p>
<center>
<p><img src="http://www.grindeq.com/img/ribbon.jpg" /></p>
</center>
<p>Em algumas pesquisas descobri que existem diversas outras maneiras de se produzir um documento Word através do R, vou apresentar aqui duas maneiras com alguns truques, mas sintam-se a vontade para dar sugestões de outras maneiras de se fazer isso nos comentários, será de grande ajuda!</p>
<div id="º-método-rmd-to-docx" class="section level2">
<h2>1º método: Rmd to docx</h2>
<p>O primeiro método envolve o uso da opção nativa do R de produzir esse tipo de documento. Segundo este <a href="https://rmarkdown.rstudio.com/articles_docx.html">guia disponível pela RStudio</a> basta selecionar o tipo de arquivo Rmarkdown da seguinte maneira:</p>
<center>
<img src="https://d33wubrfki0l68.cloudfront.net/a419c1c8f567e88f1ed51ade70752254d630de49/fc1b2/articles/images/new-file-screenshot.png" />
</center>
<p>Então selecione o formato Word para o documento, e se desejar já pode alterar o nome do título e autor do documento (não é obrigado a fazer isso nesse momento)</p>
<center>
<img src="https://d33wubrfki0l68.cloudfront.net/66a92ebda97ab32fc7b4dc3a919fcc688a15482c/32107/articles/images/new-r-markdown-box.png" />
</center>
<p>Um novo documento será exibido com o preâmbulo default para esse tipo de arquivo. O interessante aqui é que você pode compilar seu documento, alterar o estilo e salvar na mesma pasta do arquivo que você está trabalhando, de forma que as alterações no estilo sejam salvas e utilizadas como referência ao incluir no preâmbulo o nome deste documento como no exemplo a seguir:</p>
<pre><code>---
title: &quot;Título do trabalho&quot;
author: &quot;Fellipe&quot;
date: &quot; 06 de março de 2018&quot;
output:
  word_document:
    reference_docx: word-styles-reference-01.docx
---</code></pre>
<p>Outros recursos interessantes são os de formatar tabelas e figuras. Para formatar as tabelas podemos utilizar os pacotes que já usávamos em documentos <span class="math inline">\(\LaTeX\)</span> para PDF ou Rmd para html. como por exemplo veja uma tabela simples produzida por códigos em R gerando uma tabela em Word usando a função <code>kable</code>:</p>
<center>
<img src="/post/2018-03-07-word-e-r-2/word-e-r-2_files/img4.png" />
</center>
<p>Muitas outras opções podem ser utilizadas, mais informações podem ser conferidas na <a href="https://rmarkdown.rstudio.com/articles_docx.html">documentação no site da RStudio</a> ou então conferir as opções de formatação utilizando a função <code>knitr::kable()</code> e o pacote <code>kableExtra</code> no <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">manual do pacote kableExtra</a>.</p>
<p>Para alterar as dimensões de todas as figuras do documento ou mesmo incluir um sumário também basta alterar as especificações do preâmbulo, como por exemplo:</p>
<pre><code>---
title: &quot;Título do trabalho&quot;
author: &quot;Fellipe&quot;
date: &quot; 06 de março de 2018&quot;
output: word_document
    reference_docx: word-styles-reference-01.docx
    fig_width: 7
    fig_height: 4
    fig_caption: true
    toc: true
---</code></pre>
<p>Muito simples gerar o arquivo diretamente em Word!</p>
</div>
<div id="º-método-grmddocx_document" class="section level2">
<h2>2º método: Grmd::docx_document</h2>
<p>Mesmo com a simplicidade oferecida pelo recurso nativo do R, não parece ser possível formatar as tabelas da maneira mais elaborara utilizando essas funções, fiz um post falando sobre <a href="https://gomesfellipe.github.io/post/2018-01-12-tabelas-incriveis-com-r/tabelas-incriveis-com-r/">como criar tabelas incríveis com R</a> porém a maioria das opções dos pacotes apresentados lá servem apenas para documentos no formato html.</p>
<p>Pesquisando se havia algum jeito de criar o documento em html que pudesse ser aberto no Word encontrei um pacote disponível no github chamado <a href="https://github.com/gforge/Grmd"><code>Grmd</code></a>. Sua finalidade é trabalhar com a publicação rápida, escrevendo o documento como normalmente em RMarkdown e permitindo que o documento html gerado possa ser aberto em Word sem problemas de formatação!</p>
<p>Por exemplo, uma formatação da tabela e elaborção de imagem que é bem tranquilo de se fazer em html com o <code>knitr::kable()</code> e com <code>ggplot::ggplot()</code>:</p>
<pre class="r"><code>dt &lt;- mtcars[1:5, 1:6]
#Tabela gerada:
kable(dt,
      &quot;html&quot;,
      caption= &quot;Título&quot;,
      align = c(&quot;l&quot;,&quot;r&quot;,&quot;l&quot;,&quot;r&quot;,&quot;l&quot;,&quot;r&quot;,&quot;l&quot;))%&gt;%
  kable_styling(full_width = F) %&gt;%
  add_header_above(c(&quot; &quot; = 1, &quot;Group 1&quot; = 2, &quot;Group 2&quot; = 2, &quot;Group 3&quot; = 2))%&gt;%
  group_rows(&quot;Grupo A&quot;,1,3)%&gt;%
  group_rows(&quot;Grupo B&quot;,4,5)</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-1">Table 1: </span>Título
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Group 1
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Group 2
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Group 3
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
mpg
</th>
<th style="text-align:right;">
cyl
</th>
<th style="text-align:left;">
disp
</th>
<th style="text-align:right;">
hp
</th>
<th style="text-align:left;">
drat
</th>
<th style="text-align:right;">
wt
</th>
</tr>
</thead>
<tbody>
<tr grouplength="3">
<td colspan="7" style="border-bottom: 1px solid;">
<strong>Grupo A</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mazda RX4
</td>
<td style="text-align:left;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:left;">
3.90
</td>
<td style="text-align:right;">
2.620
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mazda RX4 Wag
</td>
<td style="text-align:left;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
160
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:left;">
3.90
</td>
<td style="text-align:right;">
2.875
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Datsun 710
</td>
<td style="text-align:left;">
22.8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
108
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:left;">
3.85
</td>
<td style="text-align:right;">
2.320
</td>
</tr>
<tr grouplength="2">
<td colspan="7" style="border-bottom: 1px solid;">
<strong>Grupo B</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Hornet 4 Drive
</td>
<td style="text-align:left;">
21.4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
258
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:left;">
3.08
</td>
<td style="text-align:right;">
3.215
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Hornet Sportabout
</td>
<td style="text-align:left;">
18.7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
360
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:left;">
3.15
</td>
<td style="text-align:right;">
3.440
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>library(tidyr)
library(ggplot2)
n=nrow(mtcars)

rbind(
cbind(gather(mtcars[,1:2]*10),Grupo=rep(&quot;Grupo1&quot;,n)),
cbind(gather(mtcars[,3:4]),Grupo=rep(&quot;Grupo2&quot;,n)),
cbind(gather(mtcars[,5:6]*100),Grupo=rep(&quot;Grupo3&quot;,n))
)%&gt;%
  ggplot(aes( fill=key, x=value))+  geom_bar(position=&quot;dodge&quot;)+
  coord_flip()+ facet_wrap(~Grupo,ncol = 1)+ 
  xlab(&quot;Banco mtcars adaptado para exemplo&quot;)+theme(axis.text.x = element_text(size=18)) +
  theme_set(theme_gray(base_size = 13))+theme(axis.title.y = element_text(size = rel(1.2)))+theme_bw()</code></pre>
<p><img src="/post/2018-03-07-word-e-r-2/word-e-r-2_files/figure-html/unnamed-chunk-1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Pode ser muito útil utilizar da mesma praticidade de construir as tabelas em html nos documentos words. Utilizando o pacote <a href="https://github.com/gforge/Grmd"><code>Grmd</code></a>, ao abrir o documento no Word a tabela e figura acima serão exibidas da seguinte maneira:</p>
<center>
<img src="/post/2018-03-07-word-e-r-2/word-e-r-2_files/img2.png" />
</center>
<p>Para utilizar o pacote basta instala-lo através da função <code>devtools::install_github("gforge/Grmd")</code>, após o pacote instalado é só modificar onde estiver escrito <code>output:word_document</code> no preâmbulo por <code>Grmd::docx_document</code> e ficar tranquilo, porque todas as funcionalidades apresentadas acima continuam funcionando! Veja o exemplo acima alterado:</p>
<pre><code>---
title: &quot;Título do trabalho&quot;
author: &quot;Fellipe&quot;
date: &quot; 06 de março de 2018&quot;
output: word_document
    reference_docx: word-styles-reference-01.docx
    fig_width: 7
    fig_height: 4
    fig_caption: true
    toc: true
---</code></pre>
<p>Portanto ao deixar o preâmbulo dessa nova maneira, seu documento será renderizado em html e poderá ser aberto e editado como documento Word tranquilamente! Assim a pessoa que receber o relatório final estará em contato direto com suas análises em um formato que seja amigável para ela e ela se sinta confortável em editar, copiar, colar ou fazer o que bem entender!</p>
<p>Atenção! Pois no github do desenvolvedor possui um aviso de que o pacote “provavelmente será fundido com o pacote Gmisc”, portanto é bom ficar atento a possíveis alterações!</p>
</div>
</div>
<div id="dica-para-casos-extremos" class="section level1">
<h1>Dica para casos extremos</h1>
<p>A principal dica quando não sabemos resolver um problema é: MANTENHA A CALMA! Mesmo com todas essas opções, ainda existem casos que nenhum esses artifícios será o bastante! Para isso muitas vezes é preciso explorar o desconhecido e usar a criatividade!</p>
<p>Um problema prático que eu tive e precisava solucionar em um tempo razoavelmente curto era que de as margens das tabelas que eu criei não cabiam de maneira satisfatória na página. Diante disso pesquisei bastante e me lembrei que assim como o Excel, o Word também possui Macros! Portanto pesquisando mais um pouco na internet encontrei <a href="https://datascienceplus.com/r-markdown-how-to-format-tables-and-figures-in-docx-files/">este artigo</a> que ensina como formatar tabelas e figuras em documentos .docx!</p>
<center>
<img src="https://lh6.googleusercontent.com/-pgLFnuWFV7E/UDVVoRcvmrI/AAAAAAAAAxU/1qTUIIrvxpA/s347/Bot%25C3%25A3o%2520Macro.png" />
</center>
<p><a href="https://datascienceplus.com/r-markdown-how-to-format-tables-and-figures-in-docx-files/">No artigo</a> é apresentada uma Macro para formatar as tabelas então depois de pesquisar um pouco e fazer algumas alterações foi bem útil para resolver meu problema com o tamanho da letra e a posição das tabelas! A Macro adaptada foi a seguinte:</p>
<pre><code>Sub FormatTables()

 Dim tbl As Table
    For Each tbl In ActiveDocument.Tables
         tbl.AutoFormat wdTableFormatList6
         tbl.Range.Font.Name = &quot;Arial&quot;
         tbl.Range.Font.Size = 6
         tbl.Range.ParagraphFormat.SpaceBefore = 1
         tbl.Range.ParagraphFormat.SpaceAfter = 2
         tbl.Range.Cells.SetHeight RowHeight:=18, HeightRule:=wdRowHeightExactly

    Next

End Sub</code></pre>
<p>Esta macro formata todas as tabelas o documento, selecionando o estilo <code>TableFormatList6</code>, a fonte <code>Arial</code> com o tamanho <code>6</code> e altera os espaçamentos de parágrafos, resumindo todo esse processo em um único botão</p>
</div>
<div id="foco-nas-análises" class="section level1">
<h1>Foco nas análises</h1>
<center>
<img src="/post/2018-03-07-word-e-r-2/word-e-r-2_files/img3.jpg" />
</center>
<p>Após usar o o recurso <code>Grmd::docx_document</code> em conjunto com a Macro <code>FormatTables</code> foi possível focar nas análises dos resultados e deixar a tarefa de formatação muito mais ágil, porém este método não é definitivo e a busca por novas maneiras de fazer e otimizar esse e outros tipos de tarefas integradas com R continua!</p>
</div>

        <p><strong>Leia o post completo em:</strong> <a href="https://gomesfellipe.github.io/post/2018-03-07-word-e-r-2/word-e-r-2/">Produzindo e formatando um documento Word direto em R</a></p>
        <p><em>Este post foi originalmente publicado em <a href="https://gomesfellipe.github.io/">Fellipe Gomes - Data Science Blog</a></em></p>
      ]]></content:encoded>
      <category>Estatistica</category>
      <category>R</category>
      <category>Reports</category>
      <category>Prática</category>
      <category>RMarkdown</category>
      <category domain="tag">Estatistica</category>
      <category domain="tag">gamificacao</category>
      <category domain="tag">gomesfellipe</category>
      <category domain="tag">Prática</category>
      <category domain="tag">R</category>
      <category domain="tag">R Markdown</category>
      <category domain="tag">word</category>
      <category domain="tag">macro</category>
      <category domain="tag">rmarkdown</category>
    </item>
    <item>
      <title>Gerenciando arquivos do Dropbox com R</title>
      <link>https://gomesfellipe.github.io/post/2017-12-04-gerenciando-arquivos-do-dropbox-com-r/</link>
      <pubDate>Mon, 04 Dec 2017 00:00:00 +0000</pubDate>
      <author>gomes.fellipe1@gmail.com (Fellipe Carvalho Gomes)</author>
      <guid>https://gomesfellipe.github.io/post/2017-12-04-gerenciando-arquivos-do-dropbox-com-r/</guid>
      <description>O Dropbox Armazenar arquivos na nuvem é uma prática muito comum nos dias de hoje. O Dropbox é um dos muitos exemplos de repositórios baseados no conceito de “computação em nuvem”, que oferece o serviço para compartilhar e armazenar arquivos.
Não é novidade que a “computação em nuvem” tem impulsionado muitos projetos, em especial projetos de Big Data ocorrendo em diversos setores e existe um volume absurdo de dados sendo gerados.</description>
      <content:encoded>&lt;![CDATA[
        


<div id="o-dropbox" class="section level1">
<h1>O Dropbox</h1>
<!-- ![](/img/2017-12-04-gerenciando-arquivos-do-dropbox-com-r/imagem1.png) -->
<p>Armazenar arquivos na nuvem é uma prática muito comum nos dias de hoje. O Dropbox é um dos muitos exemplos de repositórios baseados no conceito de “computação em nuvem”, que oferece o serviço para compartilhar e armazenar arquivos.</p>
<p>Não é novidade que a “computação em nuvem” tem impulsionado muitos projetos, em especial projetos de Big Data ocorrendo em diversos setores e existe um volume absurdo de dados sendo gerados.</p>
<p>Então essa habilidade de lidar com arquivos em nuvem parece bem razoável para um cientista de dados. Mesmo que nossos repositórios não sejam repositórios que se qualifiquem como “Big Data” é interessante como algumas práticas podem ser úteis de uma maneira geral.</p>
<p>Já existem diversas opções de para extrair grandes volumes de dados que estão disponíveis gratuitamente, como o projeto da <a href="https://www.elastic.co/">elastic</a> com a <a href="https://www.elastic.co/webinars/introduction-elk-stack">stack ELK</a>.</p>
<p>Mas quero abordar aqui sobre o pacote <a href="https://cran.r-project.org/web/packages/rdrop2/rdrop2.pdf">rdrop2</a>, ele apresenta funções muito úteis para gerenciar os arquivos armazenados na nuvem diretamente de dentro do RStudio.</p>
</div>
<div id="o-pacote-rdrop2" class="section level1">
<h1>O pacote <code>rdrop2</code></h1>
<p>Procurei pela internet alguma página que fornecesse as instruções do pacote em português mas não encontrei. Então trago aqui algumas das instruções e funções úteis que estão disponíveis no <a href="https://github.com/karthik/rdrop2">manual do pacote</a>.</p>
<div id="configurando-o-serviço" class="section level2">
<h2>Configurando o serviço:</h2>
<p>Primeiramente é necessário instalar o pacote cado ainda não o tenha feito</p>
<pre class="r"><code>install.packages(&quot;rdrop2&quot;)
devtools::install_github(&quot;karthik/rdrop2&quot;) # ou a versão de desenvolvimento</code></pre>
<p>Feito isso já podemos carregar o pacote:</p>
<pre class="r"><code>library(rdrop2)</code></pre>
<p>Para que o dropbox libere o uso dos arquivos é necessária a autenticação, que pode ser feita através deste comando:</p>
<pre class="r"><code>drop_auth()</code></pre>
<p>Isso irá iniciar o seu navegador e solicitar o acesso à sua conta Dropbox, ai é só fazer o login (caso ainda não esteja logado) e em seguida podemos retornar ao R.</p>
<p>Podemos salvar o token para o do uso local ou remoto:</p>
<pre class="r"><code>token &lt;- drop_auth()
saveRDS(token, file = &quot;token.rds&quot;)</code></pre>
</div>
<div id="conferindo-as-informações-da-conta-dropbox" class="section level2">
<h2>Conferindo as informações da conta Dropbox</h2>
<p>Podemos ver quais arquivos estão presentes no nosso dropbox através dos comandos:</p>
<pre class="r"><code>library(dplyr)       # Para facilitar a manipulação dos dados
drop_acc() %&gt;%       # Selecionando o diretório
  data.frame() %&gt;%   # Convertendo para data.frame
  names()            # Solicitando informações da conta Dropbox</code></pre>
</div>
<div id="obtendo-listagem-de-diretório-dropbox" class="section level2">
<h2>Obtendo listagem de diretório Dropbox</h2>
<p>Para acessar as pastas ou arquivos em seu dropbox, podemos utilizar a função <code>drop_dir()</code>, veja:</p>
<pre class="r"><code>#Listagem do diretório Dropbox
diretorio=drop_dir()

#Para ver os arquivos contidos no diretorio:
diretorio$name

#ou especificar um caminho
drop_dir(&#39;RPubs/dplyr&#39;)$name

#Listagem de diretório de filtro por tipo de objeto (arquivo / pasta)
drop_dir() %&gt;% 
  filter(.tag == &quot;folder&quot;)</code></pre>
</div>
<div id="criando-uma-pasta-no-dropbox" class="section level2">
<h2>Criando uma pasta no Dropbox</h2>
<p>Podemos criar pastas no Dropbox de maneira muito conveniente sem ter de de sair do RStudio de forma tão simples como utilizar um comando <code>drop_creat()</code>, veja:</p>
<pre class="r"><code>#Nome da pasta que será criada será &quot;drop_test&quot; veja:
drop_create(&#39;drop_test&#39;)

#Para acessar a posição de onde a pasta foi salva:
which(drop_dir()$name==&#39;drop_test&#39;)

#Acessando a pasta pela posição:
drop_dir()$name[86]

#Também podemos fornecer o caminho completo onde ele precisa ser criado:
drop_create(&#39;drop_test/drop_test&#39;)</code></pre>
</div>
<div id="carregando-um-arquivo-no-dropbox" class="section level2">
<h2>Carregando um arquivo no Dropbox</h2>
<p>Da mesma maneira que criar pastas no Dropbox, para salvar basta utilizar o comando <code>drop_upload()</code>, veja:</p>
<pre class="r"><code>#escrevendo um arquivo csv:
write.csv(trees, &#39;trees.csv&#39;)

#carregando o arquivo para a pasta raiz:
drop_upload(&#39;trees.csv&#39;)

# ou carregar para uma pasta específica
drop_upload(&#39;trees.csv&#39;, path = &quot;drop_test/drop_test&quot;)</code></pre>
<p>Isso também pode ser fazer isso para qualquer outro tipo de arquivo e arquivos grandes são suportados independentemente da sua memória.</p>
</div>
<div id="baixando-um-arquivo" class="section level2">
<h2>Baixando um arquivo:</h2>
<p>Muito simples, veja:</p>
<pre class="r"><code>#Baixe um arquivo
drop_download(&#39;trees.csv&#39;)

# ou adicionar caminho se o arquivo não estiver na raiz
drop_download(&quot;drop_test/drop_test/trees.csv&quot;)

#Se desejar subescrever o arquivo ja existente:
drop_download(&quot;drop_test/drop_test/trees.csv&quot;, overwrite = T)</code></pre>
</div>
<div id="deletando-um-arquivo" class="section level2">
<h2>Deletando um arquivo</h2>
<p>Tão fácil quando apertar <code>DELETE</code>.</p>
<pre class="r"><code>#Delete um arquivo:
drop_delete(&#39;drop_test/drop_test/trees.csv&#39;)</code></pre>
</div>
<div id="movendo-um-arquivo" class="section level2">
<h2>Movendo um arquivo</h2>
<p>As vezes desejamos apenar mover um arquivo, continua sendo bastante simples:</p>
<pre class="r"><code>#Criando um novo diretório
drop_create(&quot;drop_test/new_folder&quot;)

#Mova um arquivo:
drop_move(&quot;drop_test/drop_test/trees.csv&quot;, &quot;drop_test/new_folder/trees.csv&quot;)</code></pre>
</div>
<div id="copiando-um-arquivo" class="section level2">
<h2>Copiando um arquivo</h2>
<pre class="r"><code>#Criando um novo repositorio novamente:
drop_create(&quot;drop_test/new_folder2&quot;)

#Copiando o arquivo para lá:
drop_copy(&quot;drop_test/new_folder/trees.csv&quot;, &quot;drop_test/new_folder2/trees.csv&quot;)</code></pre>
</div>
<div id="lendo-arquivos-csv-diretamente-do-dropbox" class="section level2">
<h2>Lendo arquivos csv diretamente do Dropbox</h2>
<p>Essa é extremamente útil para não ter que ficar baixando os arquivos toda hora</p>
<pre class="r"><code>#Escrevendo um arquivo csv
write.csv(cars, file = &quot;cars.csv&quot;)

#Enviando para o dropbox:
drop_upload(&quot;cars.csv&quot;,&quot;drop_test/new_folder/&quot;)</code></pre>
<p>Agora vamos ler isso de volta em uma sessão R com o comando <code>drop_read_csv()</code></p>
<pre class="r"><code># Baixando o arquivo:
new_cars &lt;- drop_read_csv(&quot;drop_test/new_folder/cars.csv&quot;)</code></pre>
<p>Observe que há um download silencioso acontecendo com seu diretório temporário.</p>
</div>
</div>

        <p><strong>Leia o post completo em:</strong> <a href="https://gomesfellipe.github.io/post/2017-12-04-gerenciando-arquivos-do-dropbox-com-r/">Gerenciando arquivos do Dropbox com R</a></p>
        <p><em>Este post foi originalmente publicado em <a href="https://gomesfellipe.github.io/">Fellipe Gomes - Data Science Blog</a></em></p>
      ]]></content:encoded>
      <category>Automação</category>
      <category>Prática</category>
      <category>R</category>
      <category domain="tag">gomesfellipe</category>
      <category domain="tag">Prática</category>
      <category domain="tag">R</category>
      <category domain="tag">rmarkdown</category>
      <category domain="tag">dropbox</category>
    </item>
  </channel>
</rss>